---
id: TASK-2025-09-07-T8.2-current-md
title: Current Instructions â€“ .cb/instructions/current.md
description: Maintain active agent, task, next command, last errors
status: completed
created: 2025-09-07
updated: 2025-09-07
owner: tooling-agent
domain: docs
priority: 6
agent_type: backend
dependencies: [T4.3]
tags: [current, status, docs]
---

# Task: Current Instructions â€“ .cb/instructions/current.md

## Phases
### Phase 1: ðŸš€ Implementation
- [x] Update on agent start/finish; include suggested `@rules/*`

### Phase 2: ðŸ§ª Testing
- [x] Orchestration exercise; file reflects state transitions

### Phase 3: ðŸ“š Documentation
- [x] Explain file semantics

### Phase 4: ðŸ§¹ Cleanup
- [x] Keep concise; rotate error history

### Phase 5: ðŸ’¾ Commit
- [x] Commit

## Acceptance Criteria
- [x] Opening Cursor shows actionable next step

## Completion Summary

**Status**: âœ… COMPLETED

**Implementation Details**:
- âœ… Created comprehensive `CurrentInstructionsManager` class for managing current.md
- âœ… Implemented CLI commands: `current:update`, `current:show`, `current:status`, `current:clear`, `current:refresh`, `current:init`, `current:errors`, `current:next-steps`, `current:watch`
- âœ… Added real-time system status tracking (tasks, agents, commands, rules)
- âœ… Implemented error history management with rotation
- âœ… Added suggested rules and next steps based on current context
- âœ… Created comprehensive quick reference section

**Generated Files**:
- âœ… `builder/utils/current_instructions.py` - Core current instructions system
- âœ… `builder/core/cli/current_instructions_commands.py` - CLI commands for current instructions
- âœ… `cb_docs/instructions/current.md` - Current instructions file

**Testing Results**:
- âœ… `current:init` successfully creates current instructions file
- âœ… `current:show` displays comprehensive system status and next steps
- âœ… System status tracking works correctly
- âœ… Error history management implemented
- âœ… Suggested rules and commands are contextually relevant

**Key Features**:
- **Real-time Status**: Tracks active tasks, agents, and system state
- **Error Management**: Maintains error history with automatic rotation
- **Contextual Suggestions**: Provides relevant rules and next steps
- **Quick Reference**: Comprehensive command reference
- **Watch Mode**: Real-time monitoring of changes
- **System Overview**: Complete system status at a glance

**Current Instructions Content**:
- **Current Focus**: Active task and agent information
- **System Overview**: Task, agent, command, and rule counts
- **Next Steps**: Suggested actions based on current state
- **Recent Errors**: Last 10 errors with timestamps
- **Suggested Rules**: Contextually relevant rule references
- **Quick Reference**: Common commands and status commands

**CLI Commands**:
- `cb current:update` - Update with specific task/agent/status/error
- `cb current:show` - Display current instructions content
- `cb current:status` - Show current instructions status
- `cb current:clear` - Clear current instructions file
- `cb current:refresh` - Refresh with latest system status
- `cb current:init` - Initialize current instructions file
- `cb current:errors` - Show recent errors
- `cb current:next-steps` - Show next steps
- `cb current:watch` - Watch for changes in real-time

**Integration Points**:
- Integrates with task orchestrator for task status
- Uses orchestrator agents for agent status
- Provides actionable next steps for Cursor users
- Maintains error history for debugging
- Updates automatically on system state changes
