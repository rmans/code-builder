---
id: TASK-2025-09-07-T0.4-paths
title: Path Translation Layer â€“ OverlayPaths
description: Dual-mode (overlay/standalone) path resolver used by all new features
status: pending
created: 2025-09-07
updated: 2025-09-07
owner: platform-agent
domain: infrastructure
priority: 10
agent_type: backend
dependencies: [T0.1]
tags: [critical, paths, overlay, portability]
---

# Task: Path Translation Layer â€“ OverlayPaths

## Phases
### Phase 1: ðŸš€ Implementation
- [ ] Create `.cb/engine/builder/overlay/paths.py`
- [ ] Implement mode detection + helpers: `cb_root()`, `cursor_rules_dir()`, `cb_docs_dir()`, `tasks_index()`, `logs_dir()`

### Phase 2: ðŸ§ª Testing
- [ ] Unit tests for overlay vs standalone resolution
- [ ] `python3 -m builder.overlay.paths validate` happy path

### Phase 3: ðŸ“š Documentation
- [ ] Add usage snippet to `implement.md`

### Phase 4: ðŸ§¹ Cleanup
- [ ] Replace hardcoded paths in all new modules to use OverlayPaths

### Phase 5: ðŸ’¾ Commit
- [ ] `git add . && git commit -m "feat: OverlayPaths for dual-mode pathing"`

## Acceptance Criteria
- [ ] All commands work in both modes without code changes
