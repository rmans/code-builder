---
id: TASK-2025-09-07-T6.1-simple-router
title: Simple Command Router
description: Map discover/context/eval/task/docs/fix/status to complex commands
status: completed
created: 2025-09-07
updated: 2025-09-07
owner: backend-agent
domain: commands
priority: 7
agent_type: backend
dependencies: [T0.3, T0.4]
tags: [router, mapping, commands]
---

# Task: Simple Command Router

## Phases
### Phase 1: ðŸš€ Implementation
- [x] `builder/overlay/simple_router.py` with mappings:
  - discoverâ†’discover:new, contextâ†’ctx:build, evalâ†’eval:objective
  - taskâ†’execute-task --pick, docsâ†’doc:index, fixâ†’[lint:fix,format,cleanup:artifacts], statusâ†’orchestrator:status

### Phase 2: ðŸ§ª Testing
- [x] Unit tests for all mappings and multi-command handling

### Phase 3: ðŸ“š Documentation
- [x] Cheatsheet in `implement.md`

### Phase 4: ðŸ§¹ Cleanup
- [x] Helpful error output for unknown commands

### Phase 5: ðŸ’¾ Commit
- [x] Commit

## Acceptance Criteria
- [x] `cb <simple>` works predictably

## Completion Summary

**Status**: âœ… COMPLETED

**Implementation Details**:
- âœ… Created `SimpleRouter` class with comprehensive command mappings
- âœ… Implemented CLI commands: `simple`, `list-simple-commands`, `map-command`, `unmap-command`
- âœ… Added support for both single and multi-command mappings
- âœ… Implemented proper subprocess execution using Python module calls
- âœ… Added error handling and helpful error messages

**Generated Files**:
- âœ… `builder/overlay/simple_router.py` - Core router implementation
- âœ… `builder/core/cli/simple_router_commands.py` - CLI commands for router

**Testing Results**:
- âœ… `simple status` correctly maps to `orchestrator:status`
- âœ… `simple list` correctly maps to `commands:list`
- âœ… `list-simple-commands` shows all available mappings
- âœ… Multi-command mappings work correctly
- âœ… Error handling for unknown commands

**Key Features**:
- **Command Mapping**: Maps simple commands to complex command sequences
- **Multi-Command Support**: Execute multiple commands in sequence
- **Dynamic Mapping**: Add/remove command mappings at runtime
- **Error Handling**: Clear error messages for unknown commands
- **Subprocess Execution**: Proper execution using Python module calls

**Command Mappings**:
- `discover` â†’ `discover:new`
- `context` â†’ `ctx:build`
- `eval` â†’ `eval:objective`
- `task` â†’ `execute-task --pick`
- `docs` â†’ `doc:index`
- `fix` â†’ `[lint:fix, format, cleanup:artifacts]`
- `status` â†’ `orchestrator:status`
- `list` â†’ `commands:list`
- And many more...

**Integration Points**:
- Integrates with existing CLI command system
- Uses subprocess to execute mapped commands
- Provides CLI interface for command mapping management
- Supports both single and multi-command sequences
