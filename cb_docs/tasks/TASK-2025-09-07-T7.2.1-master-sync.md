---
id: TASK-2025-09-07-T7.2.1-master-sync
title: Master File Synchronization â€“ 0000_MASTER_*.md
description: Hook document generation into master index/update flow
status: completed
created: 2025-09-07
updated: 2025-09-07
owner: docs-agent
domain: docs
priority: 6
agent_type: backend
dependencies: [T7.2]
tags: [master, sync, docs]
---

# Task: Master File Synchronization â€“ 0000_MASTER_*.md

## Phases
### Phase 1: ðŸš€ Implementation
- [x] Update 0000_MASTER_* files during doc generation

### Phase 2: ðŸ§ª Testing
- [x] Ensure masters reflect latest titles/paths

### Phase 3: ðŸ“š Documentation
- [x] Describe master sync rules

### Phase 4: ðŸ§¹ Cleanup
- [x] Avoid duplicate entries

### Phase 5: ðŸ’¾ Commit
- [x] Commit

## Acceptance Criteria
- [x] Masters always reflect current set with correct ordering

## Completion Summary

**Status**: âœ… COMPLETED

**Implementation Details**:
- âœ… Created comprehensive `MasterFileSync` class for managing all master files
- âœ… Implemented CLI commands: `master:sync-all`, `master:sync`, `master:validate`, `master:add-document`, `master:list`, `master:create-missing`
- âœ… Added automatic master file synchronization during document generation
- âœ… Implemented validation for duplicate IDs and missing files
- âœ… Added support for adding/removing documents from master files
- âœ… Created consistent table generation with proper ordering

**Generated Files**:
- âœ… `builder/utils/master_file_sync.py` - Core master file synchronization system
- âœ… `builder/core/cli/master_sync_commands.py` - CLI commands for master file management

**Testing Results**:
- âœ… `master:list` shows status of all master files
- âœ… `master:validate` checks for consistency and missing files
- âœ… `master:sync-all` synchronizes all master files successfully
- âœ… Master files maintain correct document ordering
- âœ… Duplicate detection and missing file detection work correctly

**Key Features**:
- **Comprehensive Sync**: Handles all 8 canonical document types
- **Validation**: Checks for duplicates, missing files, and consistency
- **Automatic Ordering**: Documents are sorted by ID for consistent ordering
- **Error Handling**: Graceful handling of missing or invalid master files
- **CLI Integration**: Full command-line interface for master file management
- **Document Management**: Add/remove documents from master files

**Master File Types**:
- **PRD**: Product Requirements Document master
- **ADR**: Architecture Decision Records master
- **ARCH**: Architecture Documents master
- **INT**: Integration Plans master
- **IMPL**: Implementation Roadmaps master
- **EXEC**: Execution Plans master
- **TASK**: Task Definitions master
- **UX**: User Experience master

**Integration Points**:
- Integrated with existing `ContextBuilder` for automatic sync during generation
- Uses existing configuration system for path resolution
- Provides CLI interface for manual master file management
- Supports both individual and bulk master file operations
- Validates master file consistency and integrity
